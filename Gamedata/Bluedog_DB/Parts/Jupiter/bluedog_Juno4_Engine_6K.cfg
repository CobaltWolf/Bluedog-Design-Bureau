PART
{
	name = bluedog_Juno4_Engine_6K

	module = Part
	author = CobaltWolf
	MODEL
	{
		model = Bluedog_DB/Parts/Jupiter/bluedog_Juno4_Engine_6K
	}
	rescaleFactor = 1
	node_stack_top = 0.0, 0.44709, 0.0, 0.0, 1.0, 0.0, 0
	node_stack_bottom = 0.0, -0.34895, 0.0, 0.0, -1.0, 0.0, 0
	TechRequired = generalRocketry
	entryCost = 700
	cost = 170
	category = Engine
	subcategory = 0
	title = Chryslus-IV-K6 "Seeker" Liquid Engine
	manufacturer = Bluedog Design Bureau
	description = Primitive upper stage engine. Don't activate it in the atmosphere - the engine bell is optimized for vacuum performance. Neither the most powerful nor most efficient engine, but it's a start. Designed for use on the Chryslus IV-A second and IV-B third stages. Includes 0.3125m mounting hardware.
	real_title = Juno IVB JPL 6K Engine
	real_manufacturer = Jet Propulsion Laboratory
	real_description = Primitive upper stage engine. Don't activate it in the atmosphere - the engine bell is optimized for vacuum performance. Neither the most powerful nor most efficient engine, but it's a start. Designed for use on the Juno IV-A second and IV-B third stages. Includes 0.3125m mounting hardware.
	attachRules = 1,0,1,0,0
	mass = 0.04 //25% thrust scaling //0.3
	heatConductivity = 0.06 // half default
	skinInternalConductionMult = 4.0
	emissiveConstant = 0.8 // engine nozzles are good at radiating.
	dragModelType = default
	maximum_drag = 0.2
	minimum_drag = 0.2
	angularDrag = 2
	crashTolerance = 7
	breakingForce = 200
	breakingTorque = 200
	maxTemp = 2000 // = 3600
	bulkheadProfiles = size0

	tags = ?PGM19 jupiter juno IV 4 chryslus jpl 6k

	//techtag = able
	EFFECTS
	{
		running_engine
		{
			AUDIO
			{
				channel = Ship
				clip = Bluedog_DB/Sounds/KW/sound_spsloop
				volume = 0.0 0.0
				volume = 0.01 0.1
				volume = 1.0 1.0
				pitch = 0.0 1
				pitch = 1.0 1
				loop = true
			}

			MODEL_MULTI_PARTICLE
			{
				name = fume
				modelName = Bluedog_DB/FX/PlumeParty/Engines/Hypergolic/VacFizzleFumeRed
				transformName = thrustTransform
				emission = 0.0 0.0
				emission = 0.01 0.1
				emission = 1.0 1.0
				speed = 0.0 2.0
				speed = 1.0 2.0
				energy = 0.0 0.5
				energy = 1.0 1.0
				localScale = 0.25,0.25,0.25
				localPosition = 0,0,0
			}

			MODEL_MULTI_PARTICLE
			{
				name = spark
				modelName = Bluedog_DB/FX/PlumeParty/Engines/Hypergolic/VacFizzleSparkRed
				transformName = thrustTransform
				emission = 0.0 0.0
				emission = 0.01 0.1
				emission = 1.0 1.0
				speed = 0.0 2.0
				speed = 1.0 2.0
				energy = 0.0 1.0
				energy = 1.0 1.0
				localScale = 0.25,0.25,0.25
				localPosition = 0,0,0.1
			}
		}
		engage
		{
			AUDIO
			{
				channel = Ship
				clip = sound_vent_soft
				volume = 1.0
				pitch = 0.5
				loop = false
			}
		}
		disengage
		{
			AUDIO
			{
				channel = Ship
				clip = sound_explosion_low
				volume = 1.0
				pitch = 0.8
				loop = false
			}
		}
		flameout
		{
			PREFAB_PARTICLE
			{
				prefabName = fx_exhaustSparks_flameout_2
				transformName = thrustTransform
				oneShot = true
				localOffset = 0,0,0.5
			}
			AUDIO
			{
				channel = Ship
				clip = sound_explosion_low
				volume = 1.0
				pitch = 0.8
				loop = false
			}
		}
	}

	MODULE
	{
		name = ModuleEnginesFX
		thrustVectorTransformName = thrustTransform
		exhaustDamage = True
		ignitionThreshold = 0.1
		minThrust = 0
		maxThrust = 6.67 //25% thrust scaling
		heatProduction = 150
		EngineType = LiquidFuel
		runningEffectName = running_engine

		PROPELLANT
		{
			name = LiquidFuel
			ratio = 0.9
			DrawGauge = True
		}
		PROPELLANT
		{
			name = Oxidizer
			ratio = 1.1
		}
		atmosphereCurve
		{
			key = 0 300
			key = 1 85
			key = 7 0.001
		}
	}

	MODULE
	{
	  name = ModuleB9PartSwitch
	  switcherDescription = Engine Config
	  switcherDescriptionPlural = Engine Configs
		moduleID = engineSwitch

	  SUBTYPE
	  {
    name = 6K_Base
    title = Chryslus-IV-K6 Liquid Engine
		descriptionSummary =  Small liquid upper stage engine for the Chryslus IV-A second and IV-B third stages.
		real_title = Juno IVB JPL 6K Engine
		real_descriptionSummary = Small liquid upper stage engine for the Juno IV-A second and IV-B third stages.
		descriptionDetail = <b>Thrust:</b> 1.9 kN ASL / 6.67 kN Vac.\n<b>Isp:</b> 85 s ASL / 300 s Vac.
		defaultSubtypePriority = 1
	  }

	  SUBTYPE
	  {
			name = 6K_Improved
	    title = Chryslus-IV-K6-A2 Liquid Engine
			descriptionSummary = Improved version of the K6 engine.
			real_title = Juno IVB JPL 45K Block II Engine
			real_descriptionSummary = Improved version of the 6K engine.
	    descriptionDetail = <b>Thrust:</b>  kN ASL / 8 kN Vac.\n<b>Isp:</b> 179 s ASL / 312 s Vac.
			addedCost = 25
			defaultSubtypePriority = 2
			upgradeRequired = bluedog_JPL45K_gen2
	    MODULE
	    {
	      IDENTIFIER
	      {
	        name = ModuleEnginesFX
					thrustVectorTransformName = thrustTransform
	      }

	      DATA
	      {
					maxThrust = 8
	        atmosphereCurve
	        {
	        	key = 0 306
						key = 1 87
						key = 3 0.001
	        }
	      }
			}
	  }
	}

	MODULE
	{
		name = ModuleGimbal
		gimbalResponseSpeed = 15
		useGimbalResponseSpeed = true
		gimbalTransformName = gimbalTransform
		gimbalRange = 3
	}

	MODULE
	{
		name = FXModuleLookAtConstraint

		CONSTRAINLOOKFX
		{
			targetName = gimbal1_Upper
			rotatorsName = gimbal1_Lower
		}
		CONSTRAINLOOKFX
		{
			targetName = gimbal1_Lower
			rotatorsName = gimbal1_Upper
		}
		CONSTRAINLOOKFX
		{
			targetName = gimbal2_Upper
			rotatorsName = gimbal2_Lower
		}
		CONSTRAINLOOKFX
		{
			targetName = gimbal2_Lower
			rotatorsName = gimbal2_Upper
		}
	}

	MODULE
	{
		name = FXModuleThrottleEffects
		fxModuleNames = heatColor
		responseSpeed = 1.0
		dependOnEngineState = True
		dependOnThrottle = True
	}
	MODULE
	{
		name = FXModuleThrottleEffects
		fxModuleNames = throttleColor
		responseSpeed = 1.0
		dependOnEngineState = True
		dependOnThrottle = True
	}
	MODULE
	{
		name = ModuleColorChanger
		moduleID = heatColor
		animRate = 0.025
		shaderProperty = _EmissiveColor
		excludedRenderer = innerGlow
		toggleInEditor = false
		toggleInFlight = false
		redCurve
		{
			key = 1 1 1 1
			key = 1 1 1 1
		}
		greenCurve
		{
			key = 0 0 1 1
			key = 1 1 1 1
		}
		blueCurve
		{
			key = 0 0 1 1
			key = 1 1 1 1
		}
		alphaCurve
		{
			key = 0 0 1 1
			key = 1 1 1 1
		}
	}
	MODULE
	{
		name = ModuleColorChanger
		moduleID = throttleColor
		animRate = 1
		shaderProperty = _TintColor
		includedRenderer = innerGlow
		toggleInEditor = false
		toggleInFlight = false
		redCurve
		{
			key = 0 0
			key = 1 1
		}
		greenCurve
		{
			key = 0 0
			key = 1 1
		}
		blueCurve
		{
			key = 0 0
			key = 1 1
		}
		alphaCurve
		{
			key = 0 0
			key = 1 1
		}
	}

	MODULE
	{
		name = ModuleTestSubject
		useStaging = True
		useEvent = True
		situationMask = 127
		CONSTRAINT
		{
			type = REPEATABILITY
			value = ALWAYS
			prestige = Trivial
		}
		CONSTRAINT
		{
			type = REPEATABILITY
			value = BODYANDSITUATION
			prestige = Significant
		}
		CONSTRAINT
		{
			type = REPEATABILITY
			value = ONCEPERPART
			prestige = Exceptional
		}
		CONSTRAINT
		{
			type = ALTITUDEENV
			test = GT
			value = 4000
			prestige = Trivial
		}
		CONSTRAINT
		{
			type = ALTITUDEENV
			test = LT
			value = 8000
			prestige = Trivial
		}
		CONSTRAINT
		{
			type = ALTITUDEENV
			test = GT
			value = 2000
			prestige = Significant
		}
		CONSTRAINT
		{
			type = ALTITUDEENV
			test = LT
			value = 4000
			prestige = Significant
		}
		CONSTRAINT
		{
			type = ALTITUDEENV
			test = GT
			value = 1000
			prestige = Exceptional
		}
		CONSTRAINT
		{
			type = ALTITUDEENV
			test = LT
			value = 2000
			prestige = Exceptional
		}
		CONSTRAINT
		{
			type = ALTITUDE
			test = GT
			value = 0 // this just registers altitude as something to care about
			situationMask = 8
		}
		CONSTRAINT
		{
			type = ALTITUDE
			test = LT
			value = 300000
			situationMask = 16
			body = _NotSun
		}
		CONSTRAINT
		{
			type = ALTITUDE
			test = LT
			value = 600000
			situationMask = 32
			body = _NotSun
		}
		CONSTRAINT
		{
			type = SPEED
			test = GT
			value = 0
			situationMask = 8
			prestige = Trivial
		}
		CONSTRAINT
		{
			type = SPEED
			test = LT
			value = 600
			situationMask = 8
			prestige = Trivial
		}
		CONSTRAINT
		{
			type = SPEED
			test = GT
			value = 300
			situationMask = 8
			prestige = Significant
		}
		CONSTRAINT
		{
			type = SPEED
			test = LT
			value = 1200
			situationMask = 8
			prestige = Significant
		}
		CONSTRAINT
		{
			type = SPEED
			test = GT
			value = 600
			situationMask = 8
			prestige = Exceptional
		}
		CONSTRAINT
		{
			type = SPEED
			test = LT
			value = 2500
			situationMask = 8
			prestige = Exceptional
		}
		CONSTRAINT
		{
			type = SPEEDENV
			test = LT
			value = 200
			prestige = Trivial
		}
		CONSTRAINT
		{
			type = SPEEDENV
			test = GT
			value = 100
			prestige = Trivial
		}
		CONSTRAINT
		{
			type = SPEEDENV
			test = LT
			value = 100
			prestige = Significant
		}
		CONSTRAINT
		{
			type = SPEEDENV
			test = GT
			value = 50
			prestige = Significant
		}
		CONSTRAINT
		{
			type = SPEEDENV
			test = LT
			value = 50
			prestige = Exceptional
		}
		CONSTRAINT
		{
			type = SPEEDENV
			test = GT
			value = 20
			prestige = Exceptional
		}
	}
}
